\documentclass{article}
\usepackage{mathtools}
\usepackage{backnaur}
\usepackage{multirow}
\usepackage{hhline}
\usepackage{setspace}
\doublespacing

\renewcommand{\bnfpo}{\Coloneqq}

\usepackage{fullpage}
\usepackage{logicproof}
\usepackage{parskip}
\usepackage{forest}
\usepackage{float}
\usepackage{hyperref}
\usepackage{colortbl, xcolor}

\definecolor{Red}{rgb}{1,0.8,0.8}

\newcommand{\imp}{\ensuremath{\rightarrow}}
\newcommand{\seq}{\ensuremath{\vdash}}
\newcommand{\ent}{\ensuremath{\models}}
\newcommand{\elim}{\ensuremath{\mathit{e}}}
\newcommand{\intr}{\ensuremath{\mathit{i}}}
\newcommand{\rep}[1]{copy #1}

% p116
\newcommand{\landi}[2]{$\land_\intr$ #1, #2}
\newcommand{\landex}[1]{$\land_{\elim_1}$ #1}
\newcommand{\landey}[1]{$\land_{\elim_2}$ #1}
\newcommand{\lorix}[1]{$\lor_{\intr_1}$ #1}
\newcommand{\loriy}[1]{$\lor_{\intr_2}$ #1}
\newcommand{\lore}[5]{$\lor_\elim$ #1, #2--#3, #4--#5}

% p117
\newcommand{\impi}[2]{$\imp_\intr$ #1--#2}
\newcommand{\impe}[2]{$\imp_\elim$ #1, #2}

% p118
\newcommand{\negi}[2]{$\neg_\intr$ #1--#2}
\newcommand{\nege}[2]{$\neg_\elim$ #1, #2}

% p119
\newcommand{\bote}[1]{$\bot_\elim$ #1}
\newcommand{\nnege}[1]{$\neg\neg_\elim$ #1}

% p120
\newcommand{\nnegi}[1]{$\neg\neg_\intr$ #1}

% 122
\newcommand{\modt}[2]{$\mathit{MT}$ #1, #2}

% 123
\newcommand{\pbc}[2]{$\mathit{PBC}$ #1--#2}

% 124
\newcommand{\lem}{\ensuremath{\mathit{LEM}}}

% formula logic
\newcommand{\fneg}[1]{\ensuremath{\left(\neg #1 \right)}}
\newcommand{\fland}[2]{\ensuremath{\left( #1 \land #2 \right)}}
\newcommand{\flor}[2]{\ensuremath{\left( #1 \lor #2 \right)}}
\newcommand{\fimp}[2]{\ensuremath{\left( #1 \imp #2 \right)}}

% formula logic, parenthesis override
\newcommand{\Fneg}[1]{\ensuremath{\neg #1}}
\newcommand{\FlanD}[2]{\ensuremath{#1 \land #2}}
\newcommand{\Fland}[2]{\ensuremath{#1 \land \left( #2 \right)}}
\newcommand{\flanD}[2]{\ensuremath{\left( #1 \right) \land #2}}
\newcommand{\FloR}[2]{\ensuremath{#1 \lor #2}}
\newcommand{\Flor}[2]{\ensuremath{#1 \lor \left( #2 \right)}}
\newcommand{\floR}[2]{\ensuremath{\left( #1 \right) \lor #2}}
\newcommand{\FimP}[2]{\ensuremath{#1 \imp #2}}
\newcommand{\Fimp}[2]{\ensuremath{#1 \imp \left( #2 \right)}}
\newcommand{\fimP}[2]{\ensuremath{\left( #1 \right) \imp #2}}

\newcommand{\true}{\textbf{true}}
\newcommand{\false}{\textbf{false}}

\edef\restoreparindent{\parindent=\the\parindent\relax}
\usepackage{parskip}
\restoreparindent

\title{CMPE 58S: Sp. Tp. Computer Aided Verification \\ Project: Interactive Propositional Logic Engine using Natural Deduction}
\date{\today{}}
\author{Mehmet Utkan Gezer \\ 2018700060}

\begin{document}
\maketitle

\section{Introduction}

Propositional logic, also known as propositional calculus, is the branch
of logic dealing with propositions. Natural deduction is a way of handling
propositions, whereby we apply a collection of rules to infer new
conclusions from zero or more premises, all of which themselves are
propositions.

For a more detailed introduction, we will be giving some definitions for
propositions and natural deduction, along with its semantics.

\subsection{Propositions}

Propositions are declarative
sentences with a truth value either \true{} or \false{},
and can be recursively defined as the composition of
some other, smaller, propositions. Smallest of propositions are
called \textit{atomic} propositions, which are \textit{indecomposable}
and are given a unique symbol for the declarations they make.

\textit{Compositionals} are propositions composed of other propositions,
i.e. propositions that are not atomic. In propositional logic, there
are 4 different ways of composing a \textit{compositional}:

\begin{enumerate}
	\item Negation ($\neg$): Negation of a proposition. E.g.
		``it does not rain'' is the negation of ``it rains''.
		If the original proposition has the truth value
		\true{}/\false{}, then its negation has the truth value
		\false{}/\true{}, respectively.
	\item Conjunction ($\land$): Conjunction of two propositions. E.g.
		``it does not rain and I am 25'' is the conjunction of the propositions
		``it does not rain'' and ``I am 25''. The compositional has
		the truth value \true{} only if both of its constituents
		have the truth value \true{}, and otherwise \false{}.
	\item Disjunction ($\lor$): Disjunction of two propositions. E.g.
		the non-exclusive sense of the statement
		``it is sunny or I am 5'' is the conjunction of the propositions
		``it is sunny'' and ``I am 5''. The compositional has the truth
		value \false{} only if both of its constituents have the truth
		value \false{}, otherwise (if either one or both of its constituents
		have the truth value \true{}) the compositional is \true{}.
	\item Implication ($\imp$): Implication of the second proposition,
		also known as the \textit{consequent}, by the first proposition,
		also known as the \textit{antecedent}. E.g.
		``if it is sunny then I am happy'' is the implication of
		the proposition ``I am happy'' by the proposition ``it is sunny''.
		The compositional has the truth value \false{} only if the
		antecedent and consequent are \true{} and \false{}, respectively.
\end{enumerate}

To formally define the \textit{language} of propositional logic's
\textit{well-formed formulas}, we give its Backus Naur form (BNF)
as follows:

\begin{bnf*}
	\bnfprod{$\phi$}
	{
		\bnfpn{atom} \bnfor
		\bnfts{$\Big(\neg$} \bnfpn{$\phi$} \bnfts{$\Big)$} \bnfor
		\bnfts{$\Big($} \bnfpn{$\phi$} \bnfts{$\land$}
			\bnfpn{$\phi$} \bnfts{$\Big)$} \bnfor
		\bnfts{$\Big($} \bnfpn{$\phi$} \bnfts{$\lor$}
			\bnfpn{$\phi$} \bnfts{$\Big)$} \bnfor
		\bnfts{$\Big($} \bnfpn{$\phi$} \bnfts{$\imp$}
			\bnfpn{$\phi$} \bnfts{$\Big)$}
	}\\
	\bnfprod{atom}
	{
		\bnfts{$p$} \bnfor \bnfts{$q$} \bnfor \bnfts{\bnfsk} \bnfor
		\bnfts{$p_1$} \bnfor \bnfts{$p_2$} \bnfor \bnfts{\bnfsk}
	}
\end{bnf*}

While this definition requires each use of a compositional operator
to introduce a new pair of parenthesis for the newly generated
proposition to be a well-formed formula, in practice we encounter
propositons with many of those parenthesis omitted. In absence of
parenthesis to enforce an explicit precedence of operator application,
following precedence conventions are consulted:

\begin{itemize}
	\item $\neg$ binds most tightly, followed by $\land$, $\lor$, and
		finally $\imp$, in the given order.
	\item Implication ($\imp$) is right-associative, i.e. the
		rightmost implication is to be evaluated the first.
\end{itemize}

Some books, including \textit{Logic in Computer Science} by Huth and Ryan,
regard $\land$ and $\lor$ operations as equal in precedence, in which
case a proposition like $p \lor q \land r$ should either be regarded
as unintelligible, or the same as $((p \lor q) \land r)$.
We will be adhering to the above listed convention.

\subsection{Natural deduction}

Natural deduction is a way of reasoning about a given set of propositions
and inferring new ones from them. Using a collection of \textit{proof rules},
natural deduction allows us to come up with \textit{conclusions} starting
off by a set of \textit{premises}. This relation between premises and
conclusions are formalized by expressions called \textit{sequents},
such as:
$$
\phi_1, \phi_2, \dotsc, \phi_n \vdash \psi.
$$

Sequents with no premises are also valid sequents, and are called
\textit{theorems}.

Rules of natural deduction, also known as the previously mentioned
proof rules, are at the heart of natural deduction, and this project.
They allow us to establish a valid proof step with a proposition,
using the previously validated list of propositions.

At any step, we may introduce an \textit{assumption} to the proof,
which, however, will introduce an assumption box along with it.
The top line of the assumption box is drawn right above the step
at which the assumption is introduced. We may close the assumption
box after any step. A proof rule may only be applied to propositions,
such that;
\begin{itemize}
	\item Their validity must have been previously established, and
	\item Either they must be outside any assumption box, or their
		assumption box must not have been closed, yet.
\end{itemize}

We refer to such proof steps as the \textit{accessible steps}.

A proof of a sequent is complete when the conclusion of the
sequent is established using only the rules of natural deduction and
starting off with only the premises of the sequent. It is important to
note that an established proposition may not be the conclusion if it is
found within an \textit{assumption box}.

Here is a list of all natural deduction rules we have embedded into
our program, given in sequents:

\begin{center}
	\renewcommand{\arraystretch}{1.2}
	\newcommand{\nl}{\\[4pt]}
	\newcommand{\nll}{\\[4pt]\hline}
	\begin{tabular}{l l|l}
		\multicolumn{2}{l|}{\textbf{Name}} & \textbf{Rule}\\\hhline{==|=}
		\multirow{3}{*}{Conjunction}
		& Introduction    & $\phi, \psi \vdash \phi \land \psi$\nl
		& Elimination \#1 & $\phi \land \psi \vdash \phi$\nl
		& Elimination \#2 & $\phi \land \psi \vdash \psi$\nll
		\multirow{3}{*}{Disjunction}
		& Introduction \#1 & $\phi \vdash \phi \lor \psi$\nl
		& Introduction \#2 & $\psi \vdash \phi \lor \psi$\nl
		& Elimination      & $\phi \lor \psi, \boxed{\phi \dotsb \chi},
			\boxed{\psi \dotsb \chi} \vdash \chi$\nll
		\multirow{2}{*}{Implication}
		& Introduction & $\boxed{\phi \dotsb \psi} \vdash \phi \implies \psi$\nl
		& Elimination  & $\phi, \phi \implies \psi \vdash \psi$\nll
		\multirow{2}{*}{Negation}
		& Introduction & $\boxed{\phi \dotsb \bot} \vdash \neg\phi$\nl
		& Elimination  & $\phi, \neg\phi \vdash \bot$\nll
		\multirow{1}{*}{\false{}}
		& Elimination  & $\bot \vdash \phi$\nll
		\multirow{2}{*}{Double negation}
		& Introduction & $\phi \vdash \neg\neg\phi$\nl
		& Elimination  & $\neg\neg\phi \vdash \phi$\nll
		\multicolumn{2}{l|}{MT (Modus Tollens)}
		& $\phi \imp \psi, \neg\psi \vdash \neg\phi$\nll
		\multicolumn{2}{l|}{PBC (Proof by Contraditcion)}
		& $\boxed{\neg\phi \dotsb \bot} \vdash \phi$\nll
		\multicolumn{2}{l|}{LEM (Law of Excluded Middle)}
		& $\vdash \phi \lor \neg\phi$\nll
		\multicolumn{2}{l|}{Copy}
		& $\phi \vdash \phi$
	\end{tabular}
\end{center}

The boxed premises such as $\boxed{\phi \dotsb \psi}$ on
implication introduction, is an assumption box in the proof
that starts right before the proposition $\phi$ and ends right
after the proposition $\psi$. 
To make step on the proof, one of the proof rules given
above must be used. To use a rule, we need accessible propositions
and/or assumption boxes that fits to the rule's sequent's propositions.
Only if we are able to fulfill the \textit{requirements} of the rule,
we then may establish the validity of a new proposition according
to the definition of the rule, and specifically the rule's sequent's
conclusion. In natural deduction, this is the only way to
make a proof step and approach to the ultimate conclusion.

Accessibility of an assumption box is defined similar to the
accessibility of individual proof steps. This time, not a single
step but the assumption box as a whole should be accessible as a
single entity.

\section{Exercises from book}
Following exercises are from the book ``Logic in Computer Science:
Modelling and Reasoning about Systems'' by Michael Huth and Mark Ryan.

\subsection{Exercise 1.2.1.x}   % Page 95
Validity of the following is to be proven.
$$
p \imp (q \lor r), q \imp s, r \imp s \seq p \imp s
$$

Proof:
\begin{logicproof}{2}
    p \imp (q \lor r)   & premise\\
    q \imp s            & premise\\
    r \imp s            & premise\\
    \begin{subproof}
        p               & assumption\\
        q \lor r        & \impe{1}{4}\\
        \begin{subproof}
            q           & assumption\\
            s           & \impe{2}{6}
        \end{subproof}
        \begin{subproof}
            r           & assumption\\
            s           & \impe{3}{8}
        \end{subproof}
        s               & \lore{5}{6}{7}{8}{9}
    \end{subproof}
    p \imp s            & \impi{4}{10}
\end{logicproof}

\pagebreak
\subsection{Exercise 1.2.2.d}   % Page 95
Validity of the following is questioned.
We claim it to be true, and prove it.
$$
p \lor q, \neg q \lor r \seq p \lor r
$$

Proof:
\begin{logicproof}{2}
    p \lor q                & premise\\
    \neg q \lor r           & premise\\
    q \lor \neg q           & \lem\\
    \begin{subproof}
        q                   & assumption\\
        \begin{subproof}
            \neg q          & assumption\\
            \bot            & \nege{4}{5}\\
            r               & \bote{6}
        \end{subproof}
        \begin{subproof}
            r               & assumption
        \end{subproof}
        r                   & \lore{2}{5}{7}{8}{8}\\
        p \lor r            & \loriy{9}
    \end{subproof}
    \begin{subproof}
        \neg q              & assumption\\
        \begin{subproof}
            p               & assumption
        \end{subproof}
        \begin{subproof}
            q               & assumption\\
            \bot            & \nege{13}{11}\\
            p               & \bote{14}
        \end{subproof}
        p                   & \lore{1}{12}{12}{13}{15}\\
        p \lor r            & \lorix{16}
    \end{subproof}
    p \lor r                & \lore{3}{4}{10}{11}{17}
\end{logicproof}

\pagebreak
\subsection{Exercise 1.2.3.q}   % Page 96
Validity of the following is to be proven using \lem.
$$
\seq (p \imp q) \lor (q \imp r)
$$

Proof:
\begin{logicproof}{2}
    q \lor \neg q                   & \lem\\
    \begin{subproof}
        q                           & assumption\\
        \begin{subproof}
            p                       & assumption\\
            q                       & \rep{2}
        \end{subproof}
        p \imp q                    & \impi{3}{4}\\
        (p \imp q) \lor (q \imp r)  & \lorix{5}
    \end{subproof}
    \begin{subproof}
        \neg q                      & assumption\\
        \begin{subproof}
            q                       & assumption\\
            \bot                    & \nege{7}{8}\\
            r                       & \bote{9}
        \end{subproof}
        q \imp r                    & \impi{8}{10}\\
        (p \imp q) \lor (q \imp r)  & \loriy{11}
    \end{subproof}
    (p \imp q) \lor (q \imp r)      & \lore{1}{2}{6}{7}{12}
\end{logicproof}

\subsection{Exercise 1.3.4.b}   % Page 97
Parse tree of the following formula is to be drawn:
$$
\floR{\FimP{\flor{\FimP{p}{\Fneg{q}}}{\FlanD{p}{r}}}{s}}{\Fneg{r}}
$$

The parse tree can be seen in Figure~\ref{fig:ex134b}.
\begin{figure}[H]
    \centering
    \begin{forest}
    for tree={circle, draw, l sep=10pt, s sep=20pt}
    [$\lor$[$\imp$[$\lor$[$\imp$[$p$][$\neg$[$q$]]][$\land$[$p$][$r$]]][$s$]][$\neg$[$r$]]]
    \end{forest}
    \caption{Parse tree for the formula.}
    \label{fig:ex134b}
\end{figure}

\subsection{Exercise 1.4.5} % Page 101
Validity and satisfiability of the formula of
the parse tree in Figure 1.10 on page 44 is asked.
You can see the redrawn parse tree on Figure~\ref{fig:ex145}.

\begin{figure}[H]
    \centering
    \begin{forest}
    for tree={circle, draw, l sep=10pt, s sep=20pt}
    [$\neg$[$\land$[$\imp$[$q$][$\neg$[$p$]]][$\imp$[$p$][$\lor$[$r$][$q$]]]]]
    \end{forest}
    \caption{Redrawn parse tree of Figure 1.10 on page 44.}
    \label{fig:ex145}
\end{figure}

The formula of the parse tree is as follows:
$$
\fneg{\fland{\FimP{q}{\Fneg{p}}}{\Fimp{p}{\FloR{r}{q}}}}
$$

Using the semantic equivalence rules
(elimination of implication, De Morgan's laws and
elimination of double negation),
we can transform this formula as follows:
\begin{align*}
&\equiv \fneg{\fland{\FloR{\Fneg{q}}{\Fneg{p}}}{\Flor{\Fneg{p}}{\FloR{r}{q}}}}%
&&\text{(elimination of implication)}\\
&\equiv \fneg{\fland{\FloR{\Fneg{q}}{\Fneg{p}}}{\Fneg{p} \lor r \lor q}}%
&&\text{(elimination of parenthesis)}\\
&\equiv \FloR{\fneg{\FloR{\Fneg{q}}{\Fneg{p}}}}{\fneg{\Fneg{p} \lor r \lor q}}%
&&\text{(distribution of negation)}\\
&\equiv \flor{\FlanD{\Fneg{\Fneg{q}}}{\Fneg{\Fneg{p}}}}{\Fneg{\Fneg{p}} \land \Fneg{r} \land \Fneg{q}}%
&&\text{(distribution of negation)}\\
&\equiv \flor{\FlanD{q}{p}}{p \land \Fneg{r} \land \Fneg{q}}%
&&\text{(elimination of double negation)}
\end{align*}

This is the DNF (Disjunctive Normal Form) of the initial formula.
We then build the following partial truth table for the formula:

$$
\begin{array}{c|c|c||c|c|c}
p      & q      & r      & \FlanD{q}{p} & p \land \Fneg{r} \land \Fneg{q} & \flor{\FlanD{q}{p}}{p \land \Fneg{r} \land \Fneg{q}}\\\hline
T      & T      & T      & T            & F                               & T\\
\vdots & \vdots & \vdots & \vdots       & \vdots                          & \vdots\\
F      & T      & T      & F            & F                               & F\\
\vdots & \vdots & \vdots & \vdots       & \vdots                          & \vdots
\end{array}
$$

With only those two lines of the truth table for the
semantically equivalent formula
$\flor{\FlanD{q}{p}}{p \land \Fneg{r} \land \Fneg{q}}$
we can say that
$\fneg{\fland{\FimP{q}{\Fneg{p}}}{\Fimp{p}{\FloR{r}{q}}}}$
is satisfiable, but not valid:
\begin{itemize}
\item
\textbf{It is satisfiable}, because there exists an evaluation,
namely $(p, q, r) = (T, T, T)$ for which
the formula evaluates as $T$.
\item
\textbf{It is not valid}, and the proof for it is by contradiction.
When we assume it is valid, it should follow that
for all evaluations of the atoms the formula should
evaluate to $T$. However, for the evaluation
$(p, q, r) = (F, T, T)$, the formula evaluates as $F$,
which is a contradiction.
\end{itemize}


\subsection{Exercise 1.5.4} % Page 103
Soundness or completeness is to be used to show that
a sequent $\phi_1, \phi_2, \dotsc, \phi_n \seq \psi$
has a proof iff
$\phi_1 \imp \phi_2 \imp \dotsb \imp \phi_n \imp \psi$
is a tautology.

The statement is not even correct, and we can show that using
soundness and completeness and a proof by contradiction.

Assume that the statement is true. The statement should be true
for all $n$, so let $n = 2$. We then have a statement saying
a sequent $\phi_1, \phi_2 \seq \psi$
has a proof iff $\phi_1 \imp \phi_2 \imp \psi$
is a tautology.

By Remark 1.12, we can transform
the original sequent $\phi_1, \phi_2 \seq \psi$
as follows: $\seq \phi_1 \imp (\phi_2 \imp \psi)$.
Let us now transform them both using semantic equivalence rules:
\begin{align*}
\phi_1 \imp (\phi_2 \imp \psi) &\equiv \neg\phi_1 \lor (\neg\phi_2 \lor \psi)  &  \phi_1 \imp \phi_2 \imp \psi &\equiv \neg\phi_1 \lor \phi_2 \imp \psi\\
                               &\equiv \neg\phi_1 \lor \neg\phi_2 \lor \psi    &                               &\equiv \neg(\neg\phi_1 \lor \phi_2) \lor \psi\\
                               &                                               &                               &\equiv (\neg\neg\phi_1 \land \neg\phi_2) \lor \psi\\
                               &                                               &                               &\equiv (\phi_1 \land \neg\phi_2) \lor \psi\\
                               &                                               &                               &\equiv (\phi_1 \lor \psi) \land (\neg\phi_2 \lor \psi)
\end{align*}

By the statement assumed to be true, if the original sequent,
or equivalently its transformed form, or equivalently
its semantic equivalent has a proof, then the second formula,
or its semantic equivalent should be a tautology. Let us now
prepare their truth tables:
$$
\begin{array}{c|c|c||c|c}
\phi_1 & \phi_2 & \psi & \neg \phi_1 \lor \neg \phi_2 \lor \psi & (\phi_1 \lor \psi) \land (\neg\phi_2 \lor \psi) \\\hline
T      & T      & T    & T                                      & T\\
T      & T      & F    & F                                      & F\\
T      & F      & T    & T                                      & T\\
T      & F      & F    & T                                      & T\\
F      & T      & T    & T                                      & T\\
\rowcolor{Red}
F      & T      & F    & T                                      & F\\
F      & F      & T    & T                                      & T\\
\rowcolor{Red}
F      & F      & F    & T                                      & F
\end{array}
$$

On the truth table, we can clearly see that there are
cases (highlighted in red) where sequent has a proof,
yet the formula is not a tautology.
This is a contradiction, meaning that our assumption
was wrong. Statement that a sequent
$\phi_1, \phi_2, \dotsc, \phi_n \seq \psi$ has a proof iff
$\phi_1 \imp \phi_2 \imp \dotsb \imp \phi_n \imp \psi$
is a tautology, is not true.

\section{Classification of formulas}
Following formulas are to be classified as valid, satisfiable, or
not satisfiable, using the semantic method.

\subsection{An implication}
The formula is as follows:
$$
\neg q \imp q
$$

We can transform it into the CNF form:
\begin{align*}
&\equiv \neg\neg q \lor q\\
&\equiv q \lor q
\end{align*}

By Lemma 1.43, a disjunction of literals
$L_1 \lor L_2 \lor \dotsb \lor L_m$ is valid iff there are
$1 \leq i, j \leq m$ such that $L_i$ is $\neg L_j$.
Since $q \lor q$ has no such pair of literals,
this disjunction of literals is \textbf{not valid}.

Proposition 1.45 states that a formula is satisfiable iff
its negation is not valid. Negation of our formula is
$\fneg{q \lor q}$, and in CNF form:
\begin{align*}
&\equiv \neg q \land \neg q
\end{align*}

The resulting formula is the conjunction of two identical
disjunction of literals that consist of a single literal.
Since there is no pair of literals of form $L_i = \neg L_j$ in
$\neg q$, the negated formula is not valid by Lemma 1.43, and therefore
our original formula is \textbf{satisfiable} by Proposition 1.45.

\subsection{A conjunction}
The formula is as follows:
$$
\fland{\neg q \imp q}{q \imp \neg q}
$$

We can transform it into the CNF form:
\begin{align*}
&\equiv \fland{\neg\neg q \lor q}{\neg q \lor \neg q}\\
&\equiv \fland{q \lor q}{\neg q \lor \neg q}
\end{align*}

For the formula to be valid, both the $q \lor q$ and
$\neg q \lor \neg q$ needs to be valid. However, as proven in
the previous exercise, former is not valid, therefore the
formula is also \textbf{not valid}.

The negation of the formula is:
$$
\fneg{\fland{q \lor q}{\neg q \lor \neg q}}.
$$

We can transform it into the CNF form:
\begin{align*}
&\equiv \FloR{\fneg{q \lor q}}{\fneg{\neg q \lor \neg q}}\\
&\equiv \flor{\neg q \land \neg q}{\neg\neg q \land \neg\neg q}\\
&\equiv \flor{\neg q \land \neg q}{q \land q}\\
&\equiv \fland{\floR{\neg q \land \neg q}{q}}{\floR{\neg q \land \neg q}{q}}\\
&\equiv \fland{\fland{\neg q \lor q}{\neg q \lor q}}{\fland{\neg q \lor q}{\neg q \lor q}}\\
&\equiv \FlanD{\fland{\neg q \lor q}{\neg q \lor q}}{\fland{\neg q \lor q}{\neg q \lor q}}
\end{align*}

The resulting formula is the conjunction of 4 identical
disjunction of literals that consist of $q$ and $\neg q$.
Since $L_i = q$ and $L_j = \neg q$ is of the form $L_i = \neg L_j$
it is valid, and therefore all 4 of them are valid, and consequently
the negated formula is also valid.

By Proposition 1.45, negated formula being valid means that
the original formula is \textbf{not satisfiable}.

\end{document}
